# AI Agent 知识传递最佳实践

> 来源：Vercel 团队实测研究 —— 2026-02

## 核心发现

**简单的 AGENTS.md 完胜复杂的 Skills 系统**

在为 AI Coding Agent 提供框架知识时，简单被动的上下文文件「AGENTS.md」比复杂的、主动调用的「Skills」更有效。

## 实验数据对比

| 方案 | 通过率 | 问题 |
|------|--------|------|
| **Skills（主动调用）** | 53% | Agent 经常不调用工具，56% 案例直接瞎写 |
| Skills + 强制指令 | 79% | 极度脆弱，Prompt 措辞微调导致行为剧变 |
| **AGENTS.md（被动上下文）** | **100%** | 稳定可靠 |

## 为什么"笨办法"赢了？

### 1. 工具调用不可靠
当前 AI 模型在「何时使用工具」的判断上仍然很弱。即使拥有查阅文档的能力，Agent 也经常选择直接依赖预训练知识（往往是过时的）。

### 2. Prompt 脆弱性
在 Prompt 中加入"必须调用技能"的显式指令极度脆弱——指令措辞的微小变化会导致 Agent 行为产生巨大差异。

### 3. 被动上下文更稳定
直接把关键知识注入到上下文中，模型不需要做"是否调用工具"的判断，避免了决策失败的可能性。

## 技术实现：如何避免 Context 爆炸？

直接把海量文档塞进 Prompt 会撑爆上下文窗口。Vercel 采用的**压缩策略**：

```
不在 AGENTS.md 中放入文档全文
    ↓
放入一个约 8KB 的文档索引（文件路径 + 精简映射）
    ↓
Agent 看到索引后，知道去哪里寻找具体的文档文件
    ↓
按需读取具体文件（例如 .next-docs/ 目录）
```

**关键指令**：
> IMPORTANT: Prefer retrieval-led reasoning over pre-training-led reasoning
> （重要：优先基于检索的推理，而非基于预训练知识的推理）

## 对开发者的启示

### 框架作者
不要指望 Agent 能通过通用的"搜索"或"工具"自动学会你的新框架。

**最佳实践**：提供一个标准化的 AGENTS.md 索引片段，让用户添加到项目中。

### AI 应用开发者
不要过度迷信 Agent 的自主决策能力。

**核心原则**：Context is King

与其花时间调优复杂的 Agent 工具链，不如：
1. 精心设计的 Prompt
2. 上下文文件直接"喂"给模型关键信息
3. 拥抱 RAG，优先检索推理

## 应用到 CC（Claude Code）

对于 wannago 的 CC 系统：

1. **CLAUDE.md 已经在做对的事**：它是被动上下文，不是主动工具
2. **Skills 系统需要谨慎使用**：只在真正需要"主动调用"的场景使用（如执行外部命令）
3. **知识传递优先用文档**：框架/规范类知识应该写入 README/CLAUDE.md，而不是封装成 Skill
4. **索引策略可借鉴**：如果有大量文档，考虑在 CLAUDE.md 中建立索引指向具体文档

---

**标签**：#AI #Agent #PromptEngineering #ContextManagement
