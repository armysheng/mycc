<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MyCC - Chat Page Design Prototype</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
/* ============================================
   CSS VARIABLES â€” Theme System
   ============================================ */
:root {
  --font-display: 'Outfit', system-ui, -apple-system, sans-serif;
  --font-body: 'Outfit', system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", sans-serif;
  --font-mono: 'JetBrains Mono', 'Menlo', monospace;
  --sidebar-width: 272px;
  --skill-panel-width: 320px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --transition: 220ms cubic-bezier(0.4, 0, 0.2, 1);
}

[data-theme="dark"] {
  --bg-base: #0E1015;
  --bg-surface: #181B24;
  --bg-elevated: #222735;
  --bg-hover: #2C3244;
  --bg-active: #343B50;
  --bg-input: #1E2230;
  --text-primary: #E4E5EA;
  --text-secondary: #8E95A9;
  --text-muted: #5A6178;
  --text-inverse: #0E1015;
  --accent: #E8A93E;
  --accent-hover: #D4962E;
  --accent-subtle: rgba(232, 169, 62, 0.10);
  --accent-border: rgba(232, 169, 62, 0.25);
  --success: #3DD68C;
  --success-subtle: rgba(61, 214, 140, 0.10);
  --error: #F47174;
  --error-subtle: rgba(244, 113, 116, 0.10);
  --info: #5B9CF6;
  --info-subtle: rgba(91, 156, 246, 0.10);
  --border: rgba(255, 255, 255, 0.06);
  --border-strong: rgba(255, 255, 255, 0.10);
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.4);
  --shadow-md: 0 4px 16px rgba(0,0,0,0.5);
  --shadow-lg: 0 12px 40px rgba(0,0,0,0.6);
  --user-bubble: #2A3A5C;
  --user-bubble-text: #C8D6F0;
  --assistant-bubble: #1E2230;
  --assistant-bubble-text: #E4E5EA;
  --noise-opacity: 0.03;
}

[data-theme="light"] {
  --bg-base: #F5F3EE;
  --bg-surface: #FFFFFF;
  --bg-elevated: #EDE9E0;
  --bg-hover: #E5E0D5;
  --bg-active: #DDD7CA;
  --bg-input: #FFFFFF;
  --text-primary: #1A1D2B;
  --text-secondary: #6B7085;
  --text-muted: #9CA3B5;
  --text-inverse: #FFFFFF;
  --accent: #C48B2C;
  --accent-hover: #A97520;
  --accent-subtle: rgba(196, 139, 44, 0.08);
  --accent-border: rgba(196, 139, 44, 0.30);
  --success: #16A34A;
  --success-subtle: rgba(22, 163, 74, 0.08);
  --error: #DC2626;
  --error-subtle: rgba(220, 38, 38, 0.08);
  --info: #2563EB;
  --info-subtle: rgba(37, 99, 235, 0.08);
  --border: rgba(0, 0, 0, 0.08);
  --border-strong: rgba(0, 0, 0, 0.14);
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.06);
  --shadow-md: 0 4px 16px rgba(0,0,0,0.08);
  --shadow-lg: 0 12px 40px rgba(0,0,0,0.12);
  --user-bubble: #E8DFD0;
  --user-bubble-text: #3D3526;
  --assistant-bubble: #FFFFFF;
  --assistant-bubble-text: #1A1D2B;
  --noise-opacity: 0.02;
}

/* ============================================
   RESET & BASE
   ============================================ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  height: 100%;
  font-family: var(--font-body);
  background: var(--bg-base);
  color: var(--text-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background var(--transition), color var(--transition);
}

/* Subtle noise texture overlay */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E");
  opacity: var(--noise-opacity);
  pointer-events: none;
  z-index: 9999;
}

::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border-strong); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

button { cursor: pointer; border: none; background: none; font-family: inherit; color: inherit; }
input, textarea { font-family: inherit; }

/* ============================================
   LAYOUT â€” Three-Panel Structure
   ============================================ */
.app-layout {
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* ============================================
   SIDEBAR
   ============================================ */
.sidebar {
  width: var(--sidebar-width);
  min-width: var(--sidebar-width);
  background: var(--bg-surface);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  transition: transform var(--transition), opacity var(--transition);
  z-index: 30;
}

.sidebar-header {
  padding: 20px 16px 12px;
  flex-shrink: 0;
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 16px;
}

.brand-logo {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  background: linear-gradient(135deg, var(--accent) 0%, #D47F20 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-display);
  font-weight: 700;
  font-size: 15px;
  color: #FFF;
  letter-spacing: -0.5px;
  box-shadow: 0 2px 8px rgba(232, 169, 62, 0.3);
  flex-shrink: 0;
}

.brand-text {
  display: flex;
  flex-direction: column;
}

.brand-name {
  font-family: var(--font-display);
  font-weight: 700;
  font-size: 16px;
  letter-spacing: -0.3px;
  line-height: 1.2;
}

.brand-subtitle {
  font-size: 11px;
  color: var(--text-muted);
  letter-spacing: 0.3px;
}

.new-chat-btn {
  width: 100%;
  padding: 10px 14px;
  background: var(--accent);
  color: var(--text-inverse);
  border-radius: var(--radius-md);
  font-weight: 600;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all var(--transition);
  box-shadow: 0 2px 8px rgba(232, 169, 62, 0.25);
}
.new-chat-btn:hover {
  background: var(--accent-hover);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(232, 169, 62, 0.35);
}
.new-chat-btn svg { width: 16px; height: 16px; }

/* Search */
.sidebar-search {
  padding: 0 16px 8px;
  flex-shrink: 0;
}

.search-input {
  width: 100%;
  padding: 8px 12px 8px 34px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
  transition: all var(--transition);
}
.search-input:focus {
  border-color: var(--accent-border);
  box-shadow: 0 0 0 3px var(--accent-subtle);
}
.search-input::placeholder { color: var(--text-muted); }

.search-wrapper {
  position: relative;
}
.search-icon {
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  width: 15px;
  height: 15px;
}

/* Session List */
.session-list {
  flex: 1;
  overflow-y: auto;
  padding: 4px 8px;
}

.session-group-label {
  padding: 12px 10px 6px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.session-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 10px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition);
  margin-bottom: 2px;
  position: relative;
}
.session-item:hover { background: var(--bg-hover); }
.session-item.active {
  background: var(--accent-subtle);
  border: 1px solid var(--accent-border);
}
.session-item.active .session-title { color: var(--accent); }

.session-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--success);
  flex-shrink: 0;
  margin-top: 5px;
}
.session-dot.inactive { background: var(--text-muted); opacity: 0.4; }

.session-info { flex: 1; min-width: 0; }
.session-title {
  font-size: 13px;
  font-weight: 500;
  line-height: 1.4;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.session-preview {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 2px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.session-time {
  font-size: 11px;
  color: var(--text-muted);
  flex-shrink: 0;
  margin-top: 2px;
}

/* Sidebar Tabs */
.sidebar-tabs {
  display: flex;
  padding: 0 12px;
  gap: 0;
  flex-shrink: 0;
  border-bottom: 1px solid var(--border);
}

.sidebar-tab {
  flex: 1;
  padding: 10px 0;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
  text-align: center;
  border-bottom: 2px solid transparent;
  transition: all var(--transition);
  white-space: nowrap;
}
.sidebar-tab:hover { color: var(--text-secondary); }
.sidebar-tab.active {
  color: var(--accent);
  border-color: var(--accent);
}

/* Sidebar Tab Content */
.sidebar-tab-content {
  display: none;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
}
.sidebar-tab-content.active {
  display: flex;
}

/* Sidebar Skills List (compact) */
.sidebar-skill-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

.sidebar-skill-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition);
  margin-bottom: 2px;
}
.sidebar-skill-item:hover { background: var(--bg-hover); }

.sidebar-skill-icon {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  flex-shrink: 0;
}

.sidebar-skill-info { flex: 1; min-width: 0; }
.sidebar-skill-name {
  font-size: 13px;
  font-weight: 500;
  line-height: 1.3;
}
.sidebar-skill-trigger {
  font-size: 11px;
  color: var(--text-muted);
  font-family: var(--font-mono);
}

/* Automation Panel */
.automation-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

.automation-card {
  padding: 12px;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  margin-bottom: 6px;
  transition: all var(--transition);
}
.automation-card:hover {
  border-color: var(--border-strong);
  background: var(--bg-hover);
}

.automation-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}

.automation-name {
  font-size: 13px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 6px;
}

.automation-schedule {
  font-size: 11px;
  color: var(--text-muted);
  font-family: var(--font-mono);
  margin-bottom: 4px;
}

.automation-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 11px;
  color: var(--text-muted);
}

.automation-status {
  display: flex;
  align-items: center;
  gap: 4px;
}

.automation-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
}
.automation-dot.active { background: var(--success); }
.automation-dot.paused { background: var(--text-muted); }
.automation-dot.error { background: var(--error); }

.automation-toggle {
  width: 32px;
  height: 18px;
  border-radius: 9px;
  background: var(--bg-elevated);
  border: 1px solid var(--border-strong);
  position: relative;
  cursor: pointer;
  transition: all var(--transition);
  flex-shrink: 0;
}
.automation-toggle.on {
  background: var(--success);
  border-color: var(--success);
}
.automation-toggle::after {
  content: '';
  position: absolute;
  top: 1px;
  left: 1px;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: white;
  transition: transform var(--transition);
  box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}
.automation-toggle.on::after { transform: translateX(14px); }

.add-automation-btn {
  width: 100%;
  padding: 10px;
  border: 1px dashed var(--border-strong);
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  transition: all var(--transition);
  margin-top: 4px;
}
.add-automation-btn:hover {
  border-color: var(--accent-border);
  color: var(--accent);
  background: var(--accent-subtle);
}

/* Sidebar Footer */
.sidebar-footer {
  padding: 12px 16px;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
}

.user-info {
  display: flex;
  align-items: center;
  gap: 10px;
}

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-sm);
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  color: white;
  flex-shrink: 0;
}

.user-name {
  font-size: 13px;
  font-weight: 500;
}

.sidebar-actions {
  display: flex;
  gap: 4px;
}

.sidebar-action-btn {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: all var(--transition);
}
.sidebar-action-btn:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}
.sidebar-action-btn svg { width: 18px; height: 18px; }

/* ============================================
   MAIN CHAT AREA
   ============================================ */
.chat-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  position: relative;
}

/* Chat Header */
.chat-header {
  padding: 14px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  background: var(--bg-surface);
}

.chat-header-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.mobile-menu-btn {
  display: none;
  width: 36px;
  height: 36px;
  border-radius: var(--radius-sm);
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
  transition: all var(--transition);
}
.mobile-menu-btn:hover { background: var(--bg-hover); }
.mobile-menu-btn svg { width: 20px; height: 20px; }

.chat-title-area { display: flex; flex-direction: column; }
.chat-title {
  font-size: 15px;
  font-weight: 600;
  line-height: 1.3;
}
.chat-status {
  font-size: 12px;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 5px;
}
.status-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--success);
  animation: pulse 2s infinite;
}
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

.chat-header-right {
  display: flex;
  align-items: center;
  gap: 4px;
}

.header-btn {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: all var(--transition);
  position: relative;
}
.header-btn:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}
.header-btn.active {
  background: var(--accent-subtle);
  color: var(--accent);
}
.header-btn svg { width: 18px; height: 18px; }

.header-btn .badge {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--accent);
  border: 2px solid var(--bg-surface);
}

/* Chat Messages Container */
.chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

/* Empty State */
.empty-state {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.empty-content {
  text-align: center;
  max-width: 400px;
}

.empty-avatar {
  width: 72px;
  height: 72px;
  border-radius: 18px;
  background: linear-gradient(135deg, var(--accent) 0%, #D47F20 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--font-display);
  font-weight: 700;
  font-size: 28px;
  color: white;
  margin: 0 auto 20px;
  box-shadow: 0 8px 24px rgba(232, 169, 62, 0.25);
}

.empty-greeting {
  font-size: 22px;
  font-weight: 600;
  margin-bottom: 8px;
  font-family: var(--font-display);
}

.empty-hint {
  color: var(--text-secondary);
  font-size: 14px;
  line-height: 1.6;
  margin-bottom: 28px;
}

/* Quick Actions */
.quick-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}

.quick-action {
  padding: 8px 16px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  border-radius: 20px;
  font-size: 13px;
  color: var(--text-secondary);
  transition: all var(--transition);
  white-space: nowrap;
}
.quick-action:hover {
  border-color: var(--accent-border);
  color: var(--accent);
  background: var(--accent-subtle);
}

/* Message Bubbles */
.message-row {
  display: flex;
  gap: 10px;
  max-width: 85%;
  animation: messageIn 0.3s ease-out;
}
.message-row.user {
  align-self: flex-end;
  flex-direction: row-reverse;
}
.message-row.assistant { align-self: flex-start; }
.message-row.system {
  align-self: center;
  max-width: 100%;
}

@keyframes messageIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.msg-avatar {
  width: 28px;
  height: 28px;
  border-radius: 8px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
  margin-top: 2px;
}
.msg-avatar.cc {
  background: linear-gradient(135deg, var(--accent) 0%, #D47F20 100%);
  color: white;
}
.msg-avatar.user-av {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.msg-bubble {
  padding: 10px 14px;
  border-radius: var(--radius-md);
  font-size: 14px;
  line-height: 1.65;
  max-width: 100%;
}

.message-row.user .msg-bubble {
  background: var(--user-bubble);
  color: var(--user-bubble-text);
  border-bottom-right-radius: 4px;
}

.message-row.assistant .msg-bubble {
  background: var(--assistant-bubble);
  color: var(--assistant-bubble-text);
  border: 1px solid var(--border);
  border-bottom-left-radius: 4px;
}

.msg-time {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 4px;
  padding: 0 4px;
}
.message-row.user .msg-time { text-align: right; }

/* Tool Call Messages (compact) */
.tool-msg {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  border-radius: 20px;
  font-size: 12px;
  color: var(--text-secondary);
  align-self: flex-start;
  margin-left: 38px;
  cursor: pointer;
  transition: all var(--transition);
}
.tool-msg:hover {
  background: var(--bg-hover);
  border-color: var(--border-strong);
}

.tool-icon {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  flex-shrink: 0;
}
.tool-icon.reading { background: var(--info-subtle); color: var(--info); }
.tool-icon.writing { background: var(--success-subtle); color: var(--success); }
.tool-icon.running { background: var(--accent-subtle); color: var(--accent); }

.tool-result {
  font-size: 11px;
  color: var(--text-muted);
  margin-left: auto;
}

/* Thinking Message (collapsed) */
.thinking-msg {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: transparent;
  border: 1px dashed var(--border-strong);
  border-radius: 20px;
  font-size: 12px;
  color: var(--text-muted);
  align-self: flex-start;
  margin-left: 38px;
  cursor: pointer;
  transition: all var(--transition);
  font-style: italic;
}
.thinking-msg:hover {
  background: var(--bg-hover);
}

/* System Messages */
.system-msg {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 16px;
  font-size: 12px;
  color: var(--text-muted);
}

.system-divider {
  flex: 1;
  height: 1px;
  background: var(--border);
}

/* Chat Input Area */
.chat-input-area {
  padding: 12px 20px 16px;
  flex-shrink: 0;
  background: var(--bg-surface);
  border-top: 1px solid var(--border);
}

/* Quick actions bar above input */
.input-quick-actions {
  display: flex;
  gap: 6px;
  margin-bottom: 10px;
  overflow-x: auto;
  padding-bottom: 2px;
}
.input-quick-actions::-webkit-scrollbar { display: none; }

.input-quick-action {
  padding: 5px 12px;
  border: 1px solid var(--border);
  border-radius: 16px;
  font-size: 12px;
  color: var(--text-muted);
  white-space: nowrap;
  transition: all var(--transition);
  flex-shrink: 0;
}
.input-quick-action:hover {
  border-color: var(--accent-border);
  color: var(--accent);
  background: var(--accent-subtle);
}

.input-wrapper {
  position: relative;
  display: flex;
  align-items: flex-end;
  gap: 8px;
}

.input-box {
  flex: 1;
  min-height: 44px;
  max-height: 160px;
  padding: 10px 14px;
  background: var(--bg-input);
  border: 1px solid var(--border-strong);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: 14px;
  line-height: 1.5;
  resize: none;
  outline: none;
  transition: all var(--transition);
}
.input-box:focus {
  border-color: var(--accent-border);
  box-shadow: 0 0 0 3px var(--accent-subtle);
}
.input-box::placeholder { color: var(--text-muted); }

.send-btn {
  width: 44px;
  height: 44px;
  border-radius: var(--radius-md);
  background: var(--accent);
  color: var(--text-inverse);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition);
  flex-shrink: 0;
  box-shadow: 0 2px 8px rgba(232, 169, 62, 0.25);
}
.send-btn:hover {
  background: var(--accent-hover);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(232, 169, 62, 0.35);
}
.send-btn:disabled {
  background: var(--bg-elevated);
  color: var(--text-muted);
  box-shadow: none;
  transform: none;
  cursor: not-allowed;
}
.send-btn svg { width: 18px; height: 18px; }

.input-mode-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 6px;
  padding: 0 4px;
}

.mode-indicator {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: var(--text-muted);
  padding: 3px 8px;
  border-radius: 12px;
  transition: all var(--transition);
  cursor: pointer;
}
.mode-indicator:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}
.mode-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
}
.mode-dot.normal { background: var(--success); }
.mode-dot.plan { background: var(--info); }

.input-hint {
  font-size: 11px;
  color: var(--text-muted);
}

/* ============================================
   SKILL PANEL (Right Side)
   ============================================ */
.skill-panel {
  width: var(--skill-panel-width);
  min-width: var(--skill-panel-width);
  background: var(--bg-surface);
  border-left: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  transition: transform var(--transition), opacity var(--transition);
  overflow: hidden;
}

.skill-panel.hidden {
  width: 0;
  min-width: 0;
  border: none;
  transform: translateX(100%);
  opacity: 0;
  pointer-events: none;
}

.skill-panel-header {
  padding: 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.skill-panel-title {
  font-size: 15px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.skill-panel-title .title-icon {
  width: 20px;
  height: 20px;
  color: var(--accent);
}

.skill-close-btn {
  width: 28px;
  height: 28px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: all var(--transition);
}
.skill-close-btn:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}
.skill-close-btn svg { width: 16px; height: 16px; }

/* Skill Tabs */
.skill-tabs {
  display: flex;
  padding: 8px 16px 0;
  gap: 0;
  flex-shrink: 0;
}

.skill-tab {
  flex: 1;
  padding: 8px 0;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-muted);
  text-align: center;
  border-bottom: 2px solid transparent;
  transition: all var(--transition);
}
.skill-tab:hover { color: var(--text-secondary); }
.skill-tab.active {
  color: var(--accent);
  border-color: var(--accent);
}

/* Skill List */
.skill-list {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
}

.skill-card {
  padding: 14px;
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
  margin-bottom: 8px;
  cursor: pointer;
  transition: all var(--transition);
}
.skill-card:hover {
  border-color: var(--border-strong);
  background: var(--bg-hover);
}

.skill-card-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 8px;
}

.skill-icon-name {
  display: flex;
  align-items: center;
  gap: 10px;
}

.skill-icon {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  flex-shrink: 0;
}
.skill-icon.purple { background: #7C3AED20; }
.skill-icon.blue { background: #3B82F620; }
.skill-icon.green { background: #22C55E20; }
.skill-icon.amber { background: #F59E0B20; }
.skill-icon.red { background: #EF444420; }

.skill-name {
  font-size: 14px;
  font-weight: 600;
  line-height: 1.3;
}

.skill-trigger {
  font-size: 12px;
  color: var(--text-muted);
  font-family: var(--font-mono);
  margin-top: 2px;
}

.skill-status-badge {
  padding: 3px 8px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 500;
  flex-shrink: 0;
}
.skill-status-badge.installed {
  background: var(--success-subtle);
  color: var(--success);
}
.skill-status-badge.available {
  background: var(--bg-elevated);
  color: var(--text-muted);
}

.skill-desc {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.skill-tags {
  display: flex;
  gap: 6px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.skill-tag {
  padding: 2px 8px;
  background: var(--bg-elevated);
  border-radius: 10px;
  font-size: 11px;
  color: var(--text-muted);
}

/* ============================================
   SETTINGS PANEL (overlays sidebar)
   ============================================ */
.settings-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--transition);
  backdrop-filter: blur(4px);
}
.settings-overlay.open {
  opacity: 1;
  pointer-events: auto;
}

.settings-panel {
  background: var(--bg-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-lg);
  width: 480px;
  max-width: 90vw;
  max-height: 85vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  transform: scale(0.95) translateY(10px);
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.settings-overlay.open .settings-panel {
  transform: scale(1) translateY(0);
}

.settings-header {
  padding: 20px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid var(--border);
}

.settings-title {
  font-size: 18px;
  font-weight: 600;
  font-family: var(--font-display);
}

.settings-body {
  padding: 24px;
  overflow-y: auto;
  flex: 1;
}

.settings-section {
  margin-bottom: 28px;
}
.settings-section:last-child { margin-bottom: 0; }

.settings-section-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin-bottom: 14px;
}

.setting-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
}
.setting-row:last-child { border-bottom: none; }

.setting-label {
  font-size: 14px;
  font-weight: 500;
}

.setting-desc {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 2px;
}

/* Toggle Switch */
.toggle {
  width: 44px;
  height: 24px;
  border-radius: 12px;
  background: var(--bg-elevated);
  border: 1px solid var(--border-strong);
  position: relative;
  cursor: pointer;
  transition: all var(--transition);
  flex-shrink: 0;
}
.toggle.on {
  background: var(--accent);
  border-color: var(--accent);
}
.toggle::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: white;
  transition: transform var(--transition);
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}
.toggle.on::after { transform: translateX(20px); }

/* Select Dropdown */
.setting-select {
  padding: 6px 12px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
  cursor: pointer;
}

/* ============================================
   MOBILE OVERLAY FOR SIDEBAR
   ============================================ */
.sidebar-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  z-index: 29;
  backdrop-filter: blur(4px);
}

/* ============================================
   RESPONSIVE
   ============================================ */
@media (max-width: 1024px) {
  .skill-panel:not(.hidden) {
    position: fixed;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: 31;
    box-shadow: var(--shadow-lg);
  }
}

@media (max-width: 768px) {
  .sidebar {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    z-index: 30;
    transform: translateX(-100%);
    box-shadow: var(--shadow-lg);
  }
  .sidebar.open { transform: translateX(0); }
  .sidebar-overlay.open { display: block; }
  .mobile-menu-btn { display: flex; }
  .message-row { max-width: 95%; }
  .chat-messages { padding: 12px; }
  .chat-input-area { padding: 10px 12px 14px; }
  .quick-actions { gap: 6px; }
  .quick-action { font-size: 12px; padding: 6px 12px; }
}

/* ============================================
   LOADING ANIMATION
   ============================================ */
.typing-indicator {
  display: flex;
  gap: 5px;
  padding: 10px 14px;
  align-items: center;
}

.typing-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: var(--text-muted);
  animation: typingBounce 1.4s infinite;
}
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes typingBounce {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
  30% { transform: translateY(-6px); opacity: 1; }
}

/* Markdown-like content styling in messages */
.msg-bubble code {
  background: var(--bg-elevated);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: var(--font-mono);
  font-size: 12px;
}

.msg-bubble strong {
  font-weight: 600;
}

/* ============================================
   DESIGN NOTES OVERLAY (prototype only)
   ============================================ */
.design-notes {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--bg-surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 14px 20px;
  font-size: 12px;
  color: var(--text-muted);
  z-index: 100;
  box-shadow: var(--shadow-md);
  display: flex;
  align-items: center;
  gap: 12px;
  max-width: 600px;
}

.design-notes-label {
  font-weight: 600;
  color: var(--accent);
  white-space: nowrap;
}

.design-notes-btns {
  display: flex;
  gap: 6px;
  margin-left: auto;
  flex-shrink: 0;
}

.dn-btn {
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 500;
  border: 1px solid var(--border);
  color: var(--text-secondary);
  transition: all var(--transition);
}
.dn-btn:hover { background: var(--bg-hover); }
.dn-btn.active { background: var(--accent); color: var(--text-inverse); border-color: var(--accent); }
</style>
</head>
<body>

<div class="app-layout">

  <!-- ====== SIDEBAR ====== -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="brand">
        <div class="brand-logo">cc</div>
        <div class="brand-text">
          <div class="brand-name">MyCC</div>
          <div class="brand-subtitle">ä½ çš„ä¸ªäººåŠ©æ‰‹</div>
        </div>
      </div>
      <button class="new-chat-btn" onclick="alert('æ–°å»ºå¯¹è¯')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        æ–°å¯¹è¯
      </button>
    </div>

    <div class="sidebar-search">
      <div class="search-wrapper">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input type="text" class="search-input" placeholder="æœç´¢å¯¹è¯...">
      </div>
    </div>

    <div class="session-list">
      <div class="session-group-label">ä»Šå¤©</div>

      <div class="session-item active">
        <div class="session-dot"></div>
        <div class="session-info">
          <div class="session-title">ä¸ªäººåŠ©æ‰‹å‰ç«¯è®¾è®¡</div>
          <div class="session-preview">æˆ‘ä»¬è®©ä¸“ä¸šçš„å‰ç«¯è®¾è®¡...</div>
        </div>
        <div class="session-time">åˆšåˆš</div>
      </div>

      <div class="session-item">
        <div class="session-dot inactive"></div>
        <div class="session-info">
          <div class="session-title">å‘¨æŠ¥æ•´ç†</div>
          <div class="session-preview">å¸®æˆ‘æŠŠè¿™å‘¨çš„è¿›å±•æ•´ç†ä¸€ä¸‹</div>
        </div>
        <div class="session-time">14:30</div>
      </div>

      <div class="session-item">
        <div class="session-dot inactive"></div>
        <div class="session-info">
          <div class="session-title">VPS éƒ¨ç½²æ’æŸ¥</div>
          <div class="session-preview">SSH è¿æ¥è¶…æ—¶çš„é—®é¢˜è§£å†³äº†</div>
        </div>
        <div class="session-time">10:15</div>
      </div>

      <div class="session-group-label">æ˜¨å¤©</div>

      <div class="session-item">
        <div class="session-dot inactive"></div>
        <div class="session-info">
          <div class="session-title">mycc åç«¯æ¨¡æ¿ç³»ç»Ÿ</div>
          <div class="session-preview">ç”¨æˆ·æ³¨å†Œåè‡ªåŠ¨åˆå§‹åŒ– workspace</div>
        </div>
        <div class="session-time">æ˜¨å¤©</div>
      </div>

      <div class="session-item">
        <div class="session-dot inactive"></div>
        <div class="session-info">
          <div class="session-title">Kiro-Go çŠ¶æ€æ£€æŸ¥</div>
          <div class="session-preview">æœåŠ¡è¿è¡Œæ­£å¸¸ï¼Œè¯·æ±‚é‡ç¨³å®š</div>
        </div>
        <div class="session-time">æ˜¨å¤©</div>
      </div>

      <div class="session-group-label">æ›´æ—©</div>

      <div class="session-item">
        <div class="session-dot inactive"></div>
        <div class="session-info">
          <div class="session-title">é˜…è¯»ç¬”è®°ï¼šæ€è€ƒå¿«ä¸æ…¢</div>
          <div class="session-preview">ç³»ç»Ÿ1å’Œç³»ç»Ÿ2çš„æ ¸å¿ƒè§‚ç‚¹</div>
        </div>
        <div class="session-time">2/17</div>
      </div>

      <div class="session-item">
        <div class="session-dot inactive"></div>
        <div class="session-info">
          <div class="session-title">Claude API ç ”ç©¶</div>
          <div class="session-preview">Batch API çš„ä½¿ç”¨æ–¹å¼å’Œé™åˆ¶</div>
        </div>
        <div class="session-time">2/15</div>
      </div>
    </div>

    <div class="sidebar-footer">
      <div class="user-info">
        <div class="user-avatar">å¤§</div>
        <div class="user-name">å¤§è¾‰å“¥</div>
      </div>
      <div class="sidebar-actions">
        <button class="sidebar-action-btn" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">
          <svg id="theme-icon-light" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" style="display:none"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
          <svg id="theme-icon-dark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
        </button>
        <button class="sidebar-action-btn" onclick="toggleSettings()" title="è®¾ç½®">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Sidebar overlay for mobile -->
  <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>

  <!-- ====== MAIN CHAT AREA ====== -->
  <div class="chat-area">
    <div class="chat-header">
      <div class="chat-header-left">
        <button class="mobile-menu-btn" onclick="openSidebar()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
        </button>
        <div class="chat-title-area">
          <div class="chat-title">ä¸ªäººåŠ©æ‰‹å‰ç«¯è®¾è®¡</div>
          <div class="chat-status">
            <span class="status-dot"></span>
            cc åœ¨çº¿
          </div>
        </div>
      </div>
      <div class="chat-header-right">
        <button class="header-btn" title="æœç´¢æ¶ˆæ¯">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </button>
        <button class="header-btn" id="skill-toggle-btn" onclick="toggleSkillPanel()" title="æŠ€èƒ½é¢æ¿">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>
          <span class="badge"></span>
        </button>
        <button class="header-btn" title="æ›´å¤šé€‰é¡¹">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg>
        </button>
      </div>
    </div>

    <div class="chat-messages" id="chat-messages">
      <!-- System divider -->
      <div class="system-msg">
        <span class="system-divider"></span>
        <span>2æœˆ19æ—¥ ä¸‹åˆ</span>
        <span class="system-divider"></span>
      </div>

      <!-- User message -->
      <div class="message-row user">
        <div class="msg-avatar user-av">å¤§</div>
        <div>
          <div class="msg-bubble">
            æˆ‘ä»¬è®©ä¸“ä¸šçš„å‰ç«¯è®¾è®¡ï¼Œè®¾è®¡ä¸€ä¸‹æ•´ä½“çš„ä¼šè¯é¡µé¢å§ï¼ŒåŒ…æ‹¬æŠ€èƒ½çš„é¢æ¿ï¼Œä¼šè¯ç®¡ç†ï¼Œä¸ªæ€§åŒ–è®¾ç½®ç­‰ç­‰çš„å¤„ç†ï¼Œè®©è¿™ä¸ªä¸ªäººåŠ©æ‰‹å·¥å…·æ›´å¥½ç”¨å‹å¥½ã€‚
          </div>
          <div class="msg-time">19:10</div>
        </div>
      </div>

      <!-- Thinking (collapsed) -->
      <div class="thinking-msg" onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
        ğŸ’­ cc æ­£åœ¨æ€è€ƒ... <span style="margin-left:auto;font-size:11px;color:var(--text-muted)">â–¶</span>
      </div>
      <div style="display:none;margin-left:38px;padding:8px 12px;background:var(--bg-elevated);border-radius:var(--radius-sm);font-size:12px;color:var(--text-muted);line-height:1.6;margin-bottom:4px;border:1px dashed var(--border-strong)">
        ç”¨æˆ·å¸Œæœ›æˆ‘å¯¹æ•´ä¸ªä¼šè¯é¡µé¢åšä¸“ä¸šçš„å‰ç«¯è®¾è®¡ã€‚æˆ‘éœ€è¦è€ƒè™‘ï¼šä¾§è¾¹æ å¸ƒå±€ã€ä¼šè¯ç®¡ç†ã€æŠ€èƒ½é¢æ¿ã€ä¸ªæ€§åŒ–è®¾ç½®...å…ˆçœ‹çœ‹å½“å‰çš„ä»£ç ç»“æ„ã€‚
      </div>

      <!-- Tool calls (compact pill style) -->
      <div class="tool-msg">
        <span class="tool-icon reading">ğŸ“–</span>
        æ­£åœ¨è¯»å– <code style="font-size:11px;margin:0 2px">ChatPage.tsx</code>
        <span class="tool-result">551 è¡Œ</span>
      </div>

      <div class="tool-msg">
        <span class="tool-icon reading">ğŸ“–</span>
        æ­£åœ¨è¯»å– <code style="font-size:11px;margin:0 2px">ChatInput.tsx</code>
        <span class="tool-result">266 è¡Œ</span>
      </div>

      <div class="tool-msg">
        <span class="tool-icon reading">ğŸ”</span>
        æ­£åœ¨æ¢ç´¢å‰ç«¯ä»£ç ç»“æ„
        <span class="tool-result">34 æ–‡ä»¶</span>
      </div>

      <!-- Assistant message -->
      <div class="message-row assistant">
        <div class="msg-avatar cc">cc</div>
        <div>
          <div class="msg-bubble">
            å¥½çš„ï¼Œæˆ‘å·²ç»åˆ†æå®Œå½“å‰çš„å‰ç«¯ä»£ç ç»“æ„äº†ã€‚ç°åœ¨ç»™ä½ ä¸€ä¸ªå®Œæ•´çš„è®¾è®¡æ–¹æ¡ˆï¼š<br><br>
            <strong>è®¾è®¡æ–¹å‘ï¼šã€Œæš–è°ƒå·¥ä½œå®¤ã€</strong><br><br>
            æ ¸å¿ƒç†å¿µæ˜¯è®© cc æ„Ÿè§‰åƒä¸€ä¸ª<strong>æ¸©æš–çš„æ­æ¡£</strong>ï¼Œè€Œä¸æ˜¯å†·å†°å†°çš„ AI å·¥å…·ã€‚ä¸»è¦æ”¹åŠ¨ï¼š<br><br>
            1. <strong>ä¾§è¾¹æ ä¼˜å…ˆ</strong> â€” ä¼šè¯åˆ—è¡¨å§‹ç»ˆå¯è§ï¼Œæ”¯æŒæœç´¢å’Œåˆ†ç»„<br>
            2. <strong>æŠ€èƒ½é¢æ¿</strong> â€” å³ä¾§æ»‘å‡ºï¼Œå±•ç¤ºå·²å®‰è£…æŠ€èƒ½å’Œå¸‚åœº<br>
            3. <strong>æ¶ˆæ¯ç²¾ç®€</strong> â€” å·¥å…·è°ƒç”¨å‹ç¼©ä¸ºå°è¯ä¸¸ï¼Œæ€è€ƒè¿‡ç¨‹é»˜è®¤æŠ˜å <br>
            4. <strong>å¿«æ·æŒ‡ä»¤</strong> â€” è¾“å…¥æ¡†ä¸Šæ–¹æ˜¾ç¤ºå¸¸ç”¨æŠ€èƒ½è§¦å‘è¯
          </div>
          <div class="msg-time">19:12</div>
        </div>
      </div>

      <!-- Another user message -->
      <div class="message-row user">
        <div class="msg-avatar user-av">å¤§</div>
        <div>
          <div class="msg-bubble">è¿™ä¸ªæ–¹å‘å¾ˆå¥½ï¼Œå±•å¼€è¯´è¯´æŠ€èƒ½é¢æ¿çš„è®¾è®¡ï¼Ÿ</div>
          <div class="msg-time">19:13</div>
        </div>
      </div>

      <!-- Tool call -->
      <div class="tool-msg">
        <span class="tool-icon writing">âœï¸</span>
        æ­£åœ¨ç¼–è¾‘ <code style="font-size:11px;margin:0 2px">design.html</code>
        <span class="tool-result" style="color:var(--success)">+320 è¡Œ</span>
      </div>

      <!-- Assistant with typing indicator -->
      <div class="message-row assistant">
        <div class="msg-avatar cc">cc</div>
        <div>
          <div class="msg-bubble">
            æŠ€èƒ½é¢æ¿çš„è®¾è®¡æ€è·¯ï¼š<br><br>
            <strong>ä½ç½®</strong>ï¼šä»å³ä¾§æ»‘å…¥ï¼Œå®½åº¦ 320pxï¼Œä¸é®æŒ¡å¯¹è¯åŒº<br><br>
            <strong>åˆ†ä¸¤ä¸ª Tab</strong>ï¼š<br>
            â€¢ <strong>å·²å®‰è£…</strong> â€” å½“å‰å¯ç”¨çš„æŠ€èƒ½åˆ—è¡¨ï¼Œç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…å’Œè§¦å‘è¯<br>
            â€¢ <strong>å‘ç°</strong> â€” å¯å®‰è£…çš„æŠ€èƒ½å¸‚åœº<br><br>
            æ¯ä¸ªæŠ€èƒ½å¡ç‰‡åŒ…å«ï¼šå›¾æ ‡ã€åç§°ã€è§¦å‘è¯ã€ç®€ä»‹ã€çŠ¶æ€å¾½ç« ã€‚<br><br>
            ä½ ç°åœ¨çœ‹åˆ°çš„å³ä¾§é¢æ¿å°±æ˜¯æ•ˆæœ ğŸ‘‰
          </div>
          <div class="msg-time">19:14</div>
        </div>
      </div>
    </div>

    <!-- Chat Input -->
    <div class="chat-input-area">
      <div class="input-quick-actions">
        <button class="input-quick-action">ğŸ“‹ å¸®æˆ‘æ•´ç†</button>
        <button class="input-quick-action">ğŸ’¡ ä»Šæ—¥å°ç»“</button>
        <button class="input-quick-action">ğŸ“Š çœ‹çœ‹ç”¨é‡</button>
        <button class="input-quick-action">ğŸ” å¸®æˆ‘æŸ¥ä¸€ä¸‹</button>
        <button class="input-quick-action">ğŸ“ å†™å‘¨æŠ¥</button>
        <button class="input-quick-action">ğŸ›  æ£€æŸ¥æœåŠ¡</button>
      </div>
      <div class="input-wrapper">
        <textarea class="input-box" placeholder="è·Ÿ cc è¯´ç‚¹ä»€ä¹ˆ..." rows="1"></textarea>
        <button class="send-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
        </button>
      </div>
      <div class="input-mode-bar">
        <button class="mode-indicator" onclick="cycleMode(this)">
          <span class="mode-dot normal"></span>
          <span class="mode-text">æ™®é€šæ¨¡å¼</span>
        </button>
        <span class="input-hint">Enter å‘é€ Â· Shift+Enter æ¢è¡Œ</span>
      </div>
    </div>
  </div>

  <!-- ====== RIGHT PANEL (Skills + Automations) ====== -->
  <div class="skill-panel" id="skill-panel">
    <div class="skill-panel-header">
      <div class="skill-panel-title">
        <svg class="title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>
        å·¥å…·ç®±
      </div>
      <button class="skill-close-btn" onclick="toggleSkillPanel()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>

    <div class="skill-tabs">
      <button class="skill-tab active" onclick="switchRightTab(this, 'right-skills')">âš¡ æŠ€èƒ½</button>
      <button class="skill-tab" onclick="switchRightTab(this, 'right-automations')">â° è‡ªåŠ¨åŒ–</button>
    </div>

    <!-- Tab: æŠ€èƒ½ -->
    <div class="skill-list" id="right-skills">
      <div class="skill-card">
        <div class="skill-card-header">
          <div class="skill-icon-name">
            <div class="skill-icon amber">ğŸ“Š</div>
            <div>
              <div class="skill-name">ç”¨é‡ç»Ÿè®¡</div>
              <div class="skill-trigger">/cc-usage</div>
            </div>
          </div>
          <span class="skill-status-badge installed">å·²å®‰è£…</span>
        </div>
        <div class="skill-desc">æŸ¥çœ‹ Claude Code çš„ token ç”¨é‡ï¼ŒæŒ‰æ—¥æœŸå’Œæ¨¡å‹ç»´åº¦æ‹†åˆ†ã€‚</div>
        <div class="skill-tags">
          <span class="skill-tag">æ•°æ®</span>
          <span class="skill-tag">ç»Ÿè®¡</span>
        </div>
      </div>

      <div class="skill-card">
        <div class="skill-card-header">
          <div class="skill-icon-name">
            <div class="skill-icon blue">ğŸ“±</div>
            <div>
              <div class="skill-name">MyCC åç«¯</div>
              <div class="skill-trigger">/mycc</div>
            </div>
          </div>
          <span class="skill-status-badge installed">å·²å®‰è£…</span>
        </div>
        <div class="skill-desc">å¯åŠ¨ mycc å°ç¨‹åºåç«¯æœåŠ¡ï¼Œæ”¯æŒè¿œç¨‹è®¿é—®ã€‚</div>
        <div class="skill-tags">
          <span class="skill-tag">æœåŠ¡</span>
          <span class="skill-tag">åç«¯</span>
        </div>
      </div>

      <div class="skill-card">
        <div class="skill-card-header">
          <div class="skill-icon-name">
            <div class="skill-icon green">ğŸ“–</div>
            <div>
              <div class="skill-name">å…¬ä¼—å·é˜…è¯»</div>
              <div class="skill-trigger">/read-gzh</div>
            </div>
          </div>
          <span class="skill-status-badge installed">å·²å®‰è£…</span>
        </div>
        <div class="skill-desc">è¯»å–å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ï¼Œè‡ªåŠ¨æ€»ç»“è¦ç‚¹ã€‚</div>
        <div class="skill-tags">
          <span class="skill-tag">é˜…è¯»</span>
          <span class="skill-tag">æ€»ç»“</span>
        </div>
      </div>

      <div class="skill-card">
        <div class="skill-card-header">
          <div class="skill-icon-name">
            <div class="skill-icon purple">ğŸ’¬</div>
            <div>
              <div class="skill-name">é£ä¹¦é€šçŸ¥</div>
              <div class="skill-trigger">/tell-me</div>
            </div>
          </div>
          <span class="skill-status-badge installed">å·²å®‰è£…</span>
        </div>
        <div class="skill-desc">æ€»ç»“å½“å‰å¯¹è¯è¦ç‚¹å¹¶å‘é€åˆ°é£ä¹¦ç¾¤ã€‚</div>
        <div class="skill-tags">
          <span class="skill-tag">é€šçŸ¥</span>
          <span class="skill-tag">é£ä¹¦</span>
        </div>
      </div>

      <div class="skill-card">
        <div class="skill-card-header">
          <div class="skill-icon-name">
            <div class="skill-icon red">â°</div>
            <div>
              <div class="skill-name">å®šæ—¶ä»»åŠ¡</div>
              <div class="skill-trigger">/scheduler</div>
            </div>
          </div>
          <span class="skill-status-badge installed">å·²å®‰è£…</span>
        </div>
        <div class="skill-desc">ç®¡ç†è‡ªåŠ¨æ‰§è¡Œçš„å®šæ—¶ä»»åŠ¡ã€‚</div>
        <div class="skill-tags">
          <span class="skill-tag">è‡ªåŠ¨åŒ–</span>
          <span class="skill-tag">å®šæ—¶</span>
        </div>
      </div>

      <div class="skill-card" style="opacity:0.6;">
        <div class="skill-card-header">
          <div class="skill-icon-name">
            <div class="skill-icon green">ğŸŒ</div>
            <div>
              <div class="skill-name">ç½‘é¡µæ‘˜è¦</div>
              <div class="skill-trigger">/summarize</div>
            </div>
          </div>
          <span class="skill-status-badge available">å¯å®‰è£…</span>
        </div>
        <div class="skill-desc">ç»™ä»»æ„ URLï¼Œè‡ªåŠ¨è·å–å†…å®¹å¹¶ç”Ÿæˆç»“æ„åŒ–æ‘˜è¦ã€‚</div>
        <div class="skill-tags">
          <span class="skill-tag">é˜…è¯»</span>
          <span class="skill-tag">ç½‘é¡µ</span>
        </div>
      </div>
    </div>

    <!-- Tab: è‡ªåŠ¨åŒ– -->
    <div class="skill-list" id="right-automations" style="display:none">
      <div class="automation-card">
        <div class="automation-card-header">
          <div class="automation-name">ğŸ“‹ æ¯æ—¥æ—©æŠ¥</div>
          <div class="automation-toggle on" onclick="this.classList.toggle('on')"></div>
        </div>
        <div class="automation-schedule">æ¯å¤© 08:00</div>
        <div class="automation-meta">
          <div class="automation-status">
            <span class="automation-dot active"></span>
            è¿è¡Œä¸­
          </div>
          <span>ä¸Šæ¬¡: ä»Šå¤© 08:00</span>
        </div>
      </div>

      <div class="automation-card">
        <div class="automation-card-header">
          <div class="automation-name">ğŸ“Š å‘¨æŠ¥ç”Ÿæˆ</div>
          <div class="automation-toggle on" onclick="this.classList.toggle('on')"></div>
        </div>
        <div class="automation-schedule">æ¯å‘¨äº” 18:00</div>
        <div class="automation-meta">
          <div class="automation-status">
            <span class="automation-dot active"></span>
            è¿è¡Œä¸­
          </div>
          <span>ä¸Šæ¬¡: 2/14 18:00</span>
        </div>
      </div>

      <div class="automation-card">
        <div class="automation-card-header">
          <div class="automation-name">ğŸ”” VPS å¥åº·æ£€æŸ¥</div>
          <div class="automation-toggle on" onclick="this.classList.toggle('on')"></div>
        </div>
        <div class="automation-schedule">æ¯ 30 åˆ†é’Ÿ</div>
        <div class="automation-meta">
          <div class="automation-status">
            <span class="automation-dot active"></span>
            è¿è¡Œä¸­
          </div>
          <span>ä¸Šæ¬¡: 19:30</span>
        </div>
      </div>

      <div class="automation-card">
        <div class="automation-card-header">
          <div class="automation-name">ğŸ“° Hacker News æ‘˜è¦</div>
          <div class="automation-toggle" onclick="this.classList.toggle('on')"></div>
        </div>
        <div class="automation-schedule">æ¯å¤© 12:00</div>
        <div class="automation-meta">
          <div class="automation-status">
            <span class="automation-dot paused"></span>
            å·²æš‚åœ
          </div>
          <span>ä¸Šæ¬¡: 2/18 12:00</span>
        </div>
      </div>

      <div class="automation-card">
        <div class="automation-card-header">
          <div class="automation-name">ğŸ’¾ Obsidian åŒæ­¥</div>
          <div class="automation-toggle on" onclick="this.classList.toggle('on')"></div>
        </div>
        <div class="automation-schedule">æ¯ 6 å°æ—¶</div>
        <div class="automation-meta">
          <div class="automation-status">
            <span class="automation-dot error"></span>
            <span style="color:var(--error)">ä¸Šæ¬¡å¤±è´¥</span>
          </div>
          <span>ä¸Šæ¬¡: 18:00</span>
        </div>
      </div>

      <button class="add-automation-btn">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        æ–°å»ºè‡ªåŠ¨åŒ–ä»»åŠ¡
      </button>
    </div>
  </div>
</div>

<!-- ====== SETTINGS MODAL ====== -->
<div class="settings-overlay" id="settings-overlay" onclick="if(event.target===this)toggleSettings()">
  <div class="settings-panel">
    <div class="settings-header">
      <div class="settings-title">è®¾ç½®</div>
      <button class="skill-close-btn" onclick="toggleSettings()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>
    <div class="settings-body">
      <div class="settings-section">
        <div class="settings-section-title">ä¸ªäººä¿¡æ¯</div>
        <div class="setting-row">
          <div>
            <div class="setting-label">æ˜µç§°</div>
            <div class="setting-desc">cc ä¼šç”¨è¿™ä¸ªåå­—ç§°å‘¼ä½ </div>
          </div>
          <input type="text" class="search-input" value="å¤§è¾‰å“¥" style="width:140px;text-align:right">
        </div>
        <div class="setting-row">
          <div>
            <div class="setting-label">å¤´åƒ</div>
            <div class="setting-desc">å±•ç¤ºåœ¨å¯¹è¯ä¸­çš„å¤´åƒ</div>
          </div>
          <div class="user-avatar" style="cursor:pointer">å¤§</div>
        </div>
      </div>

      <div class="settings-section">
        <div class="settings-section-title">å¯¹è¯</div>
        <div class="setting-row">
          <div>
            <div class="setting-label">å‘é€æ–¹å¼</div>
            <div class="setting-desc">Enter é”®çš„è¡Œä¸º</div>
          </div>
          <select class="setting-select">
            <option>Enter å‘é€</option>
            <option>Shift+Enter å‘é€</option>
          </select>
        </div>
        <div class="setting-row">
          <div>
            <div class="setting-label">æ˜¾ç¤ºå·¥å…·è°ƒç”¨</div>
            <div class="setting-desc">åœ¨å¯¹è¯ä¸­å±•ç¤º cc çš„æ“ä½œè¿‡ç¨‹</div>
          </div>
          <div class="toggle on" onclick="this.classList.toggle('on')"></div>
        </div>
        <div class="setting-row">
          <div>
            <div class="setting-label">è‡ªåŠ¨å±•å¼€æ€è€ƒ</div>
            <div class="setting-desc">é»˜è®¤å±•å¼€ cc çš„æ¨ç†è¿‡ç¨‹</div>
          </div>
          <div class="toggle" onclick="this.classList.toggle('on')"></div>
        </div>
      </div>

      <div class="settings-section">
        <div class="settings-section-title">å¤–è§‚</div>
        <div class="setting-row">
          <div>
            <div class="setting-label">ä¸»é¢˜</div>
            <div class="setting-desc">æ·±è‰² / æµ…è‰²æ¨¡å¼</div>
          </div>
          <select class="setting-select" onchange="document.documentElement.dataset.theme=this.value">
            <option value="dark">æ·±è‰²</option>
            <option value="light">æµ…è‰²</option>
          </select>
        </div>
        <div class="setting-row">
          <div>
            <div class="setting-label">å­—å·</div>
            <div class="setting-desc">æ¶ˆæ¯æ–‡å­—å¤§å°</div>
          </div>
          <select class="setting-select">
            <option>å°</option>
            <option selected>ä¸­</option>
            <option>å¤§</option>
          </select>
        </div>
      </div>

      <div class="settings-section">
        <div class="settings-section-title">å…³äº</div>
        <div class="setting-row">
          <div>
            <div class="setting-label">ç‰ˆæœ¬</div>
            <div class="setting-desc">MyCC Web React</div>
          </div>
          <span style="font-size:13px;color:var(--text-muted);font-family:var(--font-mono)">v0.2.0</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Design Notes (prototype-only element) -->
<div class="design-notes" id="design-notes">
  <span class="design-notes-label">PROTOTYPE</span>
  <span>ç‚¹å‡»å³ä¾§æŒ‰é’®åˆ‡æ¢ä¸åŒçŠ¶æ€</span>
  <div class="design-notes-btns">
    <button class="dn-btn active" onclick="toggleTheme()">åˆ‡æ¢ä¸»é¢˜</button>
    <button class="dn-btn" onclick="toggleSkillPanel()">æŠ€èƒ½é¢æ¿</button>
    <button class="dn-btn" onclick="toggleSettings()">è®¾ç½®</button>
    <button class="dn-btn" onclick="document.getElementById('design-notes').style.display='none'">å…³é—­</button>
  </div>
</div>

<script>
// Theme Toggle
function toggleTheme() {
  const html = document.documentElement;
  const current = html.dataset.theme;
  html.dataset.theme = current === 'dark' ? 'light' : 'dark';
  document.getElementById('theme-icon-light').style.display = html.dataset.theme === 'dark' ? 'none' : 'block';
  document.getElementById('theme-icon-dark').style.display = html.dataset.theme === 'dark' ? 'block' : 'none';
}

// Skill Panel Toggle
function toggleSkillPanel() {
  const panel = document.getElementById('skill-panel');
  const btn = document.getElementById('skill-toggle-btn');
  panel.classList.toggle('hidden');
  btn.classList.toggle('active');
}

// Settings Toggle
function toggleSettings() {
  document.getElementById('settings-overlay').classList.toggle('open');
}

// Sidebar (mobile)
function openSidebar() {
  document.getElementById('sidebar').classList.add('open');
  document.getElementById('sidebar-overlay').classList.add('open');
}
function closeSidebar() {
  document.getElementById('sidebar').classList.remove('open');
  document.getElementById('sidebar-overlay').classList.remove('open');
}

// Tab Switching (right panel - skills/automations)
function switchRightTab(btn, tabId) {
  document.querySelectorAll('.skill-tab').forEach(t => t.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('#skill-panel .skill-list').forEach(c => c.style.display = 'none');
  document.getElementById(tabId).style.display = '';
}

// Permission Mode Cycling
const modes = [
  { dot: 'normal', text: 'æ™®é€šæ¨¡å¼' },
  { dot: 'plan', text: 'è®¡åˆ’æ¨¡å¼' },
  { dot: 'normal', text: 'æ¥å—ç¼–è¾‘' },
];
let modeIndex = 0;
function cycleMode(el) {
  modeIndex = (modeIndex + 1) % modes.length;
  el.querySelector('.mode-dot').className = 'mode-dot ' + modes[modeIndex].dot;
  el.querySelector('.mode-text').textContent = modes[modeIndex].text;
}

// Auto-resize textarea
document.querySelector('.input-box').addEventListener('input', function() {
  this.style.height = 'auto';
  this.style.height = Math.min(this.scrollHeight, 160) + 'px';
});

// Scroll to bottom on load
setTimeout(() => {
  const container = document.getElementById('chat-messages');
  container.scrollTop = container.scrollHeight;
}, 100);
</script>

</body>
</html>
